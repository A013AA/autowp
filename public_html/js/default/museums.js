define("default/museums",["jquery","googlemaps"],function(e,t){return{init:function(n){e("#google-map").each(function(){var r=new t.LatLng(52.48,13.45),i=n.museums,s=new t.Map(this,{zoom:2,center:r,mapTypeId:t.MapTypeId.ROADMAP});e.each(i,function(n,r){if(r.location){var i=new t.LatLng(r.location.lat,r.location.lng),o=new t.Marker({position:i,map:s,title:r.name}),u=e("<div />").append(e("<p />").append(e("<strong />").text(r.name)));r.desc&&u.append(e("<p />").text(r.desc)),r.url&&u.append(e("<p />").append(e("<a />").text(r.url).attr("href",r.url))),r.address&&u.append(e("<p />").text(r.address));var a=new t.InfoWindow({content:u[0]});t.event.addListener(o,"click",function(){a.open(s,o)}),e("#museum"+r.id+"maplink").on("click",function(){return a.open(s,o),s.setCenter(i),s.setZoom(18),e(window).scrollTop(0),!1})}}),navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(n){var r=new t.LatLng(n.coords.latitude,n.coords.longitude),i=new t.Geocoder;i.geocode({latLng:r},function(n,r){if(r==t.GeocoderStatus.OK){var o=null;e.each(n,function(t,n){e.each(n.address_components,function(t,n){e.each(n.types,function(e,t){t=="country"&&(o=n.long_name);if(o)return!1});if(o)return!1});if(o)return!1}),o&&i.geocode({address:o},function(t,n){e.each(t,function(e,t){return s.fitBounds(t.geometry.viewport),!1})})}})})})}}});