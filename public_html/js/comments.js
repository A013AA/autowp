define("comments",["jquery"],function(e){var t=function(t){var n=e(t),r=n.data("commentsItemId"),i=n.data("commentsType");n.find(".moderator-attention-sign").each(function(){var t=e(this),n=t.data("id"),r=e(".btn",this);r.on("click",function(){r.button("loading");var i=t.data("authorId");i?require(["message"],function(s){var o=window.location+"\nfixed";s.showDialog(i,o,function(){e.post("/comments/complete",{id:n},function(){t.remove(),r.button("reset")})},function(){r.button("reset")})}):e.post("/comments/complete",{id:n},function(){r.button("reset"),t.remove()})})}),n.find(".remove-all-comments").on("click",function(){var t=this;e.post("/comments/delete-all",{item_id:r,type:i},function(r){e(t).hide(),n.find(".message").remove()},"json")}),n.find(".comment-remove-button").on("click",function(){var t=this,n=parseInt(e(t).attr("id").replace("comment-remove-button-",""));return e.post("/comments/delete",{comment_id:n},function(n){n.ok?e(t).parents(".message:first").fadeOut(function(){e(this).remove()}):window.alert(n.message)},"json"),!1})};return e.extend(t.prototype,{completeModeratorAttention:function(t,n){e.post("/comments/complete",{id:t},function(){n&&n()})}}),function(e){new t(e)}});